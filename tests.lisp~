
(defpackage #:defmacro-enhance-test
  (:use #:cl #:defmacro-enhance #:rt))

(in-package #:defmacro-enhance)
	    
;; Tests are not direct but rather indirect

(defmacro! aif (test then &optional else)
  `(let ((,e!-it ,test))
     (if ,e!-it
	 ,then
	 ,else)))

(deftest e!.0
    (aif (+ 1 2)
	 3
	 6)
  3)
